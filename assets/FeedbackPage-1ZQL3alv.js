import{u as x,a as b,r as l,j as e}from"./index-CbP9KD6_.js";import{g as y,d as j}from"./db-CydKPM6i.js";import"./firebase-Codym4C1.js";function _(){const{eventId:s}=x();b();const[n,m]=l.useState(null),[r,a]=l.useState(!1),[g,u]=l.useState(!1),[i,h]=l.useState({rating_food:0,rating_vibes:0,rating_music:0,comment:""});l.useEffect(()=>{s&&y(s).then(m).catch(t=>{console.error(t),alert("Event nicht gefunden.")})},[s]);const c=(t,o)=>{h(f=>({...f,[t]:o}))},p=async t=>{if(t.preventDefault(),i.rating_food===0&&i.rating_vibes===0&&i.rating_music===0&&!i.comment){alert("Bitte gib zumindest eine Bewertung oder einen Kommentar ab.");return}u(!0);try{await j(s,i),a(!0)}catch(o){console.error(o),alert("Fehler beim Absenden. Bitte versuche es erneut.")}finally{u(!1)}};return r?e.jsx("div",{className:"app-root animate-fade-in",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"1rem"},children:e.jsxs("div",{className:"glass card",style:{textAlign:"center",padding:"3rem 1rem",maxWidth:"400px",width:"100%"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"ðŸŽ‰"}),e.jsx("h2",{style:{marginBottom:"1rem"},children:"Vielen Dank!"}),e.jsx("p",{style:{opacity:.8,lineHeight:"1.6"},children:"Dein Feedback hilft uns, die nÃ¤chsten Partys noch legendÃ¤rer zu machen."})]})}):n?e.jsx("div",{className:"app-root animate-fade-in",style:{padding:"1rem",paddingBottom:"3rem"},children:e.jsxs("div",{className:"glass card",style:{maxWidth:"600px",margin:"0 auto",marginTop:"1rem"},children:[e.jsx("h2",{style:{textAlign:"center",marginBottom:"0.5rem"},children:n.title}),e.jsx("p",{style:{textAlign:"center",opacity:.6,fontSize:"0.9rem",marginBottom:"2rem"},children:"Dein ehrliches Feedback (Anonym)"}),e.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[e.jsx(d,{label:"ðŸ” Essen & Trinken",value:i.rating_food,onChange:t=>c("rating_food",t)}),e.jsx(d,{label:"âœ¨ Stimmung",value:i.rating_vibes,onChange:t=>c("rating_vibes",t)}),e.jsx(d,{label:"ðŸŽµ Musik",value:i.rating_music,onChange:t=>c("rating_music",t)}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.8rem",fontWeight:"bold"},children:"ðŸ’¡ VerbesserungsvorschlÃ¤ge"}),e.jsx("textarea",{className:"input-field",rows:"4",placeholder:"Was hat gefehlt? Was war super? ErzÃ¤hl's uns...",value:i.comment,onChange:t=>h(o=>({...o,comment:t.target.value})),style:{width:"100%",resize:"vertical"}})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:g,style:{padding:"16px",fontSize:"1.1rem",marginTop:"1rem"},children:g?"Sende...":"Feedback absenden ðŸ“¨"})]})]})}):e.jsx("div",{className:"app-root",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:"Lade..."})}function d({label:s,value:n,onChange:m}){return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.8rem",fontWeight:"bold"},children:s}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:[1,2,3,4,5].map(r=>e.jsx("button",{type:"button",onClick:()=>m(r),style:{background:"none",border:"none",fontSize:"2rem",cursor:"pointer",color:r<=n?"#fbbf24":"rgba(255,255,255,0.2)",transition:"transform 0.1s",padding:"0 4px"},onMouseDown:a=>a.target.style.transform="scale(0.9)",onMouseUp:a=>a.target.style.transform="scale(1.0)",children:"â˜…"},r))}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.5,marginTop:"4px",height:"1.2em"},children:[n===1&&"Naja...",n===2&&"Ging so",n===3&&"Ganz ok",n===4&&"Super",n===5&&"LegendÃ¤r!"]})]})}export{_ as default};
