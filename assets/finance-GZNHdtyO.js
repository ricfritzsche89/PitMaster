const k=(s,a)=>{const r={},c={winner:0,loser:0,maxScore:0},t={winner:{},loser:{},maxScore:{yes:0,no:0}};return a.forEach(e=>{t.winner[e.name]=0,t.loser[e.name]=0}),s.forEach(e=>{c[e.type]||(c[e.type]=0),c[e.type]+=e.amount,e.type==="winner"||e.type==="loser"?(t[e.type][e.target]||(t[e.type][e.target]=0),t[e.type][e.target]+=e.amount):e.type}),Object.keys(t.winner).forEach(e=>{const n=t.winner[e];n===0?r[`winner_${e}`]=1:r[`winner_${e}`]=c.winner/n}),Object.keys(t.loser).forEach(e=>{const n=t.loser[e];n===0?r[`loser_${e}`]=1:r[`loser_${e}`]=c.loser/n}),r},E=(s,a,r)=>{const c=[],t={winner:0,loser:0};s.forEach(n=>{t[n.type]!==void 0&&(t[n.type]+=n.amount)});const e=(n,i)=>s.filter(o=>o.type===n&&o.target===i).reduce((o,u)=>o+u.amount,0);return s.forEach(n=>{let i=!1,o=1;if(n.type==="winner"&&n.target===a.winner){i=!0;const u=e("winner",a.winner);o=u>0?t.winner/u:1}else if(n.type==="loser"&&n.target===a.loser){i=!0;const u=e("loser",a.loser);o=u>0?t.loser/u:1}i&&c.push({user:n.user,amount:n.amount*o,profit:n.amount*o-n.amount,type:n.type,target:n.target})}),c},x=s=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(s),g=(s=[])=>s.reduce((a,r)=>a+(parseFloat(r.amount)||0),0),C=s=>{const{expenses:a=[],guests:r=[],hostMarkup:c=0,budgetLimit:t=0}=s,e=g(a),i=r.filter(p=>p.status==="accepted").length,o=e*(c/100),f=e+o,y=-o,l=i>0?f/i:0,d=r.reduce((p,m)=>p+(m.hasPaid?m.contribution||l:0),0),w=t>0&&e>t,h=l>25;return{totalExpenses:e,confirmedCount:i,adminAbsorbedCost:y,remainingCost:f,costPerGuest:l,collectedRevenue:d,isOverBudget:w,isHighCost:h,budgetLimit:t}};export{E as a,C as b,k as c,x as f};
