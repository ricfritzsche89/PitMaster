import{u as y,a as k,r as a,j as e}from"./index-CGZqZypT.js";import{c as E,d as R,e as C}from"./db-DqoeB3gf.js";function z(){const{eventId:c}=y(),h=k(),[u,p]=a.useState(null),[o,g]=a.useState([]),[n,f]=a.useState(""),[r,x]=a.useState(1),[d,i]=a.useState([null,null,null,null,null]),[m,b]=a.useState(!1);a.useEffect(()=>{const t=E(c,p),s=R(c,l=>{g(l.sort((N,S)=>N.name.localeCompare(S.name)))});return()=>{t(),s()}},[c]),a.useEffect(()=>{if(n){const t=o.find(s=>s.id===n);if(t){const s=r===1?t.round1:t.round2;i(s||[null,null,null,null,null])}}else i([null,null,null,null,null])},[n,r,o]);const v=(t,s)=>{const l=[...d];l[t]=s===""?null:parseInt(s),i(l)},j=async()=>{if(n){b(!0);try{await C(c,n,r===1?{round1:d}:{round2:d}),alert(`‚úÖ Runde ${r} gespeichert!`)}catch(t){alert("Fehler: "+t.message)}b(!1)}};if(!u)return e.jsx("div",{className:"p-8 text-center text-white",children:"Lade Event..."});const w=d.reduce((t,s)=>t+(s||0),0);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-4 pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-emerald-400 uppercase tracking-wider",children:"üéØ Remote"}),e.jsx("div",{className:"text-xs text-slate-400",children:u.title})]}),e.jsxs("div",{className:"text-2xl font-bold bg-slate-800 px-3 py-1 rounded-lg border border-slate-700",children:["R",r]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Sch√ºtze ausw√§hlen"}),e.jsxs("select",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-lg text-white focus:border-emerald-500 outline-none appearance-none",value:n,onChange:t=>f(t.target.value),style:{backgroundImage:"none"},children:[e.jsx("option",{value:"",children:"-- Bitte w√§hlen --"}),o.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (Gesamt: ",(t.round1?.reduce((s,l)=>s+(l||0),0)||0)+(t.round2?.reduce((s,l)=>s+(l||0),0)||0),")"]},t.id))]})]}),n&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("button",{onClick:()=>x(1),className:`p-4 rounded-xl font-bold transition-all ${r===1?"bg-emerald-600 text-white shadow-lg scale-105 border border-emerald-400":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:"Runde 1"}),e.jsx("button",{onClick:()=>x(2),className:`p-4 rounded-xl font-bold transition-all ${r===2?"bg-emerald-600 text-white shadow-lg scale-105 border border-emerald-400":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:"Runde 2"})]}),e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-white/10 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Ergebnisse (5 Schuss)"}),e.jsxs("div",{className:"text-xl font-mono text-emerald-400",children:["Summe: ",w]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:d.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-xs text-slate-500 mb-1",children:["#",s+1]}),e.jsx("input",{type:"number",min:"0",max:"12",value:t??"",placeholder:"-",onChange:l=>v(s,l.target.value),className:"w-full aspect-square bg-slate-800 border border-slate-600 rounded-lg text-center text-2xl font-bold text-white focus:bg-slate-700 focus:border-emerald-500 outline-none p-0"})]},s))})]}),e.jsx("button",{onClick:j,disabled:m,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-4 rounded-xl text-xl shadow-lg shadow-emerald-900/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:m?"Speichert...":"üíæ Speichern"}),e.jsx("button",{onClick:()=>{window.confirm("Zur√ºck zur √úbersicht?")&&h("/")},className:"w-full mt-4 py-3 text-slate-500 hover:text-white transition-colors",children:"Zur√ºck zum Menu"})]})]})}export{z as default};
