import{u as z,a as B,r as s,j as e}from"./index-C96OVupy.js";import{s as T,f as P,u as W,h as F}from"./db-C6JJZyOF.js";import"./firebase-Codym4C1.js";function L(){const{eventId:l}=z(),h=B(),[p,f]=s.useState(null),[c,y]=s.useState([]),[o,m]=s.useState(""),[a,g]=s.useState(1),[i,u]=s.useState([null,null,null,null,null]),[d,x]=s.useState(!1);s.useEffect(()=>{const t=T(l,f),n=P(l,r=>{y(r.sort((E,I)=>E.name.localeCompare(I.name)))});return()=>{t(),n()}},[l]),s.useEffect(()=>{if(l)return W(l,{"shooting.activeShooterId":o||null}).catch(t=>console.error("Failed to update active shooter",t)),()=>{}},[o,l]),s.useEffect(()=>{if(o){const t=c.find(n=>n.id===o);if(t){const n=a===1?t.round1:t.round2;u(n||[null,null,null,null,null])}}else u([null,null,null,null,null])},[o,a,c]);const S=(t,n)=>{const r=[...i];r[t]=n===""?null:parseInt(n),u(r)},v=async()=>{if(o){x(!0);try{await F(l,o,a===1?{round1:i}:{round2:i}),m(""),alert(`‚úÖ Runde ${a} gespeichert!`)}catch(t){alert("Fehler: "+t.message)}x(!1)}};if(!p)return e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#fff"},children:"Lade Event..."});const j=i.reduce((t,n)=>t+(n||0),0),w={minHeight:"100vh",background:"#020617",color:"white",padding:"1rem",paddingBottom:"5rem",fontFamily:"Outfit, sans-serif"},R={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"1rem"},b=t=>({padding:"1rem",borderRadius:"12px",fontWeight:"bold",fontSize:"1.2rem",border:t?"2px solid #34d399":"1px solid rgba(255,255,255,0.2)",background:t?"rgba(16, 185, 129, 0.2)":"rgba(30, 41, 59, 0.5)",color:t?"#34d399":"#94a3b8",cursor:"pointer",transition:"all 0.2s",flex:1,textAlign:"center",boxShadow:t?"0 0 15px rgba(16, 185, 129, 0.2)":"none"}),k={width:"100%",aspectRatio:"1",background:"#1e293b",border:"2px solid #475569",borderRadius:"12px",fontSize:"2rem",fontWeight:"bold",color:"white",textAlign:"center",outline:"none",transition:"all 0.2s"},C={width:"100%",background:"linear-gradient(135deg, #059669 0%, #10b981 100%)",color:"white",border:"none",padding:"1.5rem",borderRadius:"16px",fontSize:"1.5rem",fontWeight:"bold",cursor:d?"not-allowed":"pointer",boxShadow:"0 0 20px rgba(16, 185, 129, 0.4)",marginTop:"2rem",opacity:d?.7:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem"};return e.jsxs("div",{style:w,children:[e.jsxs("div",{style:R,children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.5rem",color:"#34d399",textTransform:"uppercase",letterSpacing:"1px"},children:"üéØ Remote"}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:p.title})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid #334155",fontWeight:"bold"},children:["R",a]})]}),e.jsxs("div",{style:{marginBottom:"2rem",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("label",{style:{color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Sch√ºtze ausw√§hlen"}),o&&e.jsxs("div",{className:"animate-pulse",style:{color:"#ef4444",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.8rem"},children:[e.jsx("span",{children:"üî¥"})," LIVE AM TV"]})]}),e.jsxs("select",{style:{width:"100%",background:"#1e293b",border:"2px solid #334155",borderRadius:"12px",padding:"1rem",fontSize:"1.2rem",color:"white",outline:"none",appearance:"none",backgroundImage:"none"},value:o,onChange:t=>m(t.target.value),children:[e.jsx("option",{value:"",children:"-- Bitte w√§hlen --"}),c.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",(t.round1?.reduce((n,r)=>n+(r||0),0)||0)+(t.round2?.reduce((n,r)=>n+(r||0),0)||0),")"]},t.id))]}),e.jsx("div",{style:{position:"absolute",right:"1rem",bottom:"1.2rem",pointerEvents:"none",color:"#94a3b8"},children:"‚ñº"})]}),o&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[e.jsx("button",{onClick:()=>g(1),style:b(a===1),children:"Runde 1"}),e.jsx("button",{onClick:()=>g(2),style:b(a===2),children:"Runde 2"})]}),e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.5)",padding:"1.5rem",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[e.jsx("label",{style:{color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase"},children:"Ergebnisse (5 Schuss)"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#34d399",textShadow:"0 0 10px rgba(52,211,153,0.3)"},children:["Summe: ",j]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"10px"},children:i.map((t,n)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"#64748b",marginBottom:"4px"},children:["#",n+1]}),e.jsx("input",{type:"number",min:"0",max:"12",value:t??"",placeholder:"-",onChange:r=>S(n,r.target.value),style:k,onFocus:r=>{r.target.style.borderColor="#34d399",r.target.style.boxShadow="0 0 15px rgba(52, 211, 153, 0.3)",r.target.style.background="#0f172a"},onBlur:r=>{r.target.style.borderColor="#475569",r.target.style.boxShadow="none",r.target.style.background="#1e293b"}})]},n))})]}),e.jsxs("button",{style:C,onClick:v,disabled:d,children:[e.jsx("span",{style:{fontSize:"1.8rem"},children:"üíæ"}),d?"SPEICHERT...":"SPEICHERN"]}),e.jsx("button",{onClick:()=>{window.confirm("Zur√ºck zur √úbersicht?")&&h("/")},style:{background:"none",border:"none",width:"100%",padding:"1rem",marginTop:"1rem",color:"#64748b",cursor:"pointer"},children:"Zur√ºck zum Menu"})]})]})}export{L as default};
