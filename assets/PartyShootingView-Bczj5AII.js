import{j as e,u as j,r as c}from"./index-DOKfwk7H.js";import{c as w,d as S}from"./db-BauU-V8h.js";function z({eventData:o}){if(!o?.broadcast?.active)return null;const{message:a,type:p}=o.broadcast;if(p==="overlay")return e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.85)",backdropFilter:"blur(15px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",animation:"popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:[e.jsx("div",{className:"glass",style:{padding:"4rem",border:"2px solid var(--accent-primary)",borderRadius:"24px",background:"rgba(29, 185, 84, 0.1)",boxShadow:"0 0 80px rgba(29, 185, 84, 0.4)",textAlign:"center",maxWidth:"90vw"},children:e.jsx("h1",{className:"text-gradient",style:{fontSize:"5rem",margin:0,textTransform:"uppercase",color:"white",textShadow:"0 0 40px var(--accent-primary)",lineHeight:1.2},children:a})}),e.jsx("style",{children:`
                    @keyframes popIn {
                        from { transform: scale(0.8); opacity: 0; }
                        to { transform: scale(1); opacity: 1; }
                    }
                `})]});const l=o.broadcast.speed||5,x=Math.max(5,45-l*4);return e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",background:"rgba(2, 6, 23, 0.8)",backdropFilter:"blur(10px)",borderTop:"2px solid var(--accent-primary)",color:"white",padding:"1.5rem 0",zIndex:9999,overflow:"hidden",boxShadow:"0 -5px 30px rgba(29, 185, 84, 0.15)"},children:[e.jsxs("div",{style:{display:"inline-block",whiteSpace:"nowrap",animation:`marquee ${x}s linear infinite`,fontSize:"2.5rem",fontWeight:"800",textTransform:"uppercase",color:"var(--accent-primary)",textShadow:"0 0 15px rgba(29, 185, 84, 0.4)",letterSpacing:"2px"},children:[a," Â  â€¢ Â  ",a," Â  â€¢ Â  ",a," Â  â€¢ Â  ",a," Â  â€¢ Â  ",a," Â  â€¢ Â "]}),e.jsx("style",{children:`
                @keyframes marquee {
                    0% { transform: translateX(100vw); }
                    100% { transform: translateX(-100%); }
                }
            `})]})}function T(){const{eventId:o}=j(),[a,p]=c.useState([]),[l,x]=c.useState(null),[f,y]=c.useState(null),[h,u]=c.useState(null),m=r=>{const t=(r.round1||[]).reduce((s,n)=>s+(n||0),0),i=(r.round2||[]).reduce((s,n)=>s+(n||0),0);return t+i};if(c.useEffect(()=>{const r=w(o,i=>{x(i)}),t=S(o,i=>{const s=i.sort((n,d)=>m(d)-m(n));if(s.length>0){const n=s[0];f&&f.id!==n.id&&(u(`ðŸ‘‘ Neuer FÃ¼hrender: ${n.name} ðŸ‘‘`),setTimeout(()=>u(null),5e3)),y(n)}p(s)});return()=>{t(),r&&r()}},[o]),!l)return e.jsx("div",{className:"app-root",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:"Lade..."});const v=a.slice(0,3),b=a.slice(3);return e.jsxs("div",{className:"app-root",style:{height:"100vh",overflow:"hidden",padding:"2rem",display:"flex",flexDirection:"column"},children:[e.jsx(z,{eventData:l}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 50% 50%, rgba(0, 255, 163, 0.05) 0%, transparent 70%)",zIndex:-1}}),e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3rem",borderBottom:"1px solid var(--glass-border)",paddingBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{margin:0,fontSize:"3rem",textTransform:"uppercase",letterSpacing:"0.1em"},children:[e.jsx("span",{style:{color:"var(--accent-primary)"},children:"Live"})," SchieÃŸstand"]}),e.jsx("div",{style:{opacity:.6,fontSize:"1.2rem"},children:l.title})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:["Teilnehmer: ",a.length]})})]}),h&&e.jsx("div",{className:"glass",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,background:"rgba(0,0,0,0.9)",border:"2px solid var(--accent-primary)",padding:"3rem",fontSize:"3rem",fontWeight:"bold",color:"var(--accent-primary)",boxShadow:"0 0 100px rgba(29, 185, 84, 0.6)",borderRadius:"30px",textAlign:"center",minWidth:"600px",animation:"popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:h}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 0.8fr",gap:"3rem",flex:1,overflow:"hidden"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",justifyContent:"center",paddingLeft:"1rem"},children:v.map((r,t)=>{let i="var(--glass-border)",s=1,n=null;return t===0&&(i="#fbbf24",s=1.05,n="ðŸ‘‘"),t===1&&(i="#94a3b8",s=1),t===2&&(i="#b45309",s=.95),e.jsxs("div",{className:"glass",style:{display:"flex",alignItems:"center",padding:"1.5rem",border:`2px solid ${i}`,transform:`scale(${s})`,transformOrigin:"left center",boxShadow:t===0?"0 0 30px rgba(251, 191, 36, 0.2)":"none",position:"relative",background:t===0?"rgba(251, 191, 36, 0.05)":"var(--glass-bg)",marginLeft:t===0?"1rem":"0"},children:[e.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",color:i,width:"60px",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",gap:"10px"},children:[t+1,".",r.image&&e.jsx("img",{src:r.image,alt:r.name,style:{width:"60px",height:"60px",borderRadius:"50%",objectFit:"cover",border:`2px solid ${i}`}})]}),e.jsxs("div",{style:{flex:1,paddingLeft:"2rem"},children:[e.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"bold",lineHeight:1},children:[r.name," ",n]}),e.jsxs("div",{style:{display:"flex",gap:"2rem",marginTop:"0.5rem",opacity:.7,fontSize:"1.2rem"},children:[e.jsxs("span",{children:["Runde 1: ",e.jsx("strong",{children:(r.round1||[]).reduce((d,g)=>d+(g||0),0)})]}),e.jsxs("span",{children:["Runde 2: ",e.jsx("strong",{children:(r.round2||[]).reduce((d,g)=>d+(g||0),0)})]})]})]}),e.jsx("div",{style:{fontSize:"4rem",fontWeight:"bold",color:"var(--accent-primary)"},children:m(r)})]},r.id)})}),e.jsxs("div",{className:"glass",style:{padding:"0",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--glass-border)",fontSize:"1.2rem",fontWeight:"bold",background:"rgba(255,255,255,0.02)"},children:"Verfolgerfeld"}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"1rem"},children:b.length===0?e.jsx("div",{style:{opacity:.3,textAlign:"center",marginTop:"2rem"},children:"Noch keine weiteren Teilnehmer."}):b.map((r,t)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",marginBottom:"0.5rem",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:"1.2rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("span",{style:{opacity:.5,width:"30px"},children:[t+4,"."]}),r.image&&e.jsx("img",{src:r.image,alt:r.name,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),e.jsx("strong",{children:r.name})]}),e.jsx("div",{style:{fontWeight:"bold",color:"var(--accent-secondary)"},children:m(r)})]},r.id))})]})]}),e.jsx("style",{children:`
                @keyframes popIn {
                    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                }
            `})]})}export{T as default};
