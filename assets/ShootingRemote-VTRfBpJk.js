import{u as _,a as k,r as l,j as e}from"./index-BLduZ7ua.js";import{s as y,f as E,u as R}from"./db-BaUVtD3F.js";function I(){const{eventId:d}=_(),h=k(),[u,p]=l.useState(null),[i,f]=l.useState([]),[r,g]=l.useState(""),[n,x]=l.useState(1),[o,c]=l.useState([null,null,null,null,null]),[m,b]=l.useState(!1);l.useEffect(()=>{const t=y(d,p),s=E(d,a=>{f(a.sort((N,S)=>N.name.localeCompare(S.name)))});return()=>{t(),s()}},[d]),l.useEffect(()=>{if(r){const t=i.find(s=>s.id===r);if(t){const s=n===1?t.round1:t.round2;c(s||[null,null,null,null,null])}}else c([null,null,null,null,null])},[r,n,i]);const v=(t,s)=>{const a=[...o];a[t]=s===""?null:parseInt(s),c(a)},j=async()=>{if(r){b(!0);try{await R(d,r,n===1?{round1:o}:{round2:o}),alert(`‚úÖ Runde ${n} gespeichert!`)}catch(t){alert("Fehler: "+t.message)}b(!1)}};if(!u)return e.jsx("div",{className:"p-8 text-center text-white",children:"Lade Event..."});const w=o.reduce((t,s)=>t+(s||0),0);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-4 pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-emerald-400 uppercase tracking-wider",children:"üéØ Remote"}),e.jsx("div",{className:"text-xs text-slate-400",children:u.title})]}),e.jsxs("div",{className:"text-2xl font-bold bg-slate-800 px-3 py-1 rounded-lg border border-slate-700",children:["R",n]})]}),e.jsxs("div",{className:"mb-8 relative",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-3 font-medium uppercase tracking-wider",children:"Sch√ºtze ausw√§hlen"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-slate-900/80 border-2 border-slate-700 rounded-2xl p-5 text-xl text-white focus:border-emerald-500 focus:shadow-[0_0_15px_rgba(16,185,129,0.2)] outline-none appearance-none transition-all",value:r,onChange:t=>g(t.target.value),children:[e.jsx("option",{value:"",children:"-- Bitte w√§hlen --"}),i.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (Gesamt: ",(t.round1?.reduce((s,a)=>s+(a||0),0)||0)+(t.round2?.reduce((s,a)=>s+(a||0),0)||0),")"]},t.id))]}),e.jsx("div",{className:"absolute right-5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:"‚ñº"})]})]}),r&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("button",{onClick:()=>x(1),className:`p-4 rounded-xl font-bold transition-all ${n===1?"bg-emerald-600 text-white shadow-lg scale-105 border border-emerald-400":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:"Runde 1"}),e.jsx("button",{onClick:()=>x(2),className:`p-4 rounded-xl font-bold transition-all ${n===2?"bg-emerald-600 text-white shadow-lg scale-105 border border-emerald-400":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:"Runde 2"})]}),e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-white/10 mb-8 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex justify-between items-end mb-6",children:[e.jsx("label",{className:"text-sm text-slate-400 font-medium uppercase tracking-wider",children:"Ergebnisse (5 Schuss)"}),e.jsxs("div",{className:"text-2xl font-mono font-bold text-emerald-400 drop-shadow-[0_0_10px_rgba(52,211,153,0.5)]",children:["Summe: ",w]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:o.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center group",children:[e.jsxs("span",{className:"text-xs text-slate-500 mb-2 font-mono",children:["#",s+1]}),e.jsx("input",{type:"number",min:"0",max:"12",value:t??"",placeholder:"-",onChange:a=>v(s,a.target.value),className:`w-full aspect-square bg-slate-800 border-2 border-slate-600 rounded-xl text-center text-3xl font-bold text-white \r
                                        focus:border-emerald-500 focus:bg-slate-900 focus:shadow-[0_0_20px_rgba(16,185,129,0.4)]\r
                                        selection:bg-emerald-500/30 outline-none transition-all duration-200`})]},s))})]}),e.jsxs("button",{onClick:j,disabled:m,className:"w-full bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white font-bold py-5 rounded-2xl text-2xl shadow-[0_0_30px_rgba(16,185,129,0.3)] active:scale-[0.98] transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"text-3xl",children:"üíæ"}),m?"Speichert...":"SPEICHERN"]}),e.jsx("button",{onClick:()=>{window.confirm("Zur√ºck zur √úbersicht?")&&h("/")},className:"w-full mt-4 py-3 text-slate-500 hover:text-white transition-colors",children:"Zur√ºck zum Menu"})]})]})}export{I as default};
